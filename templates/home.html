{% extends 'index.html' %}
{% block title %}Browse Products{% endblock %}
{% block main %}
    <div class="products-container">
        <h1>Welcome, {{ username | capitalize }}!</h1>
        <h2>Our Products</h2>
        {% if products %}
            <div class="product-grid">
                {% for product in products %}
                    <div class="product-card">
                        <img src="{{ url_for('static', filename=product.image_url) }}" alt="{{ product.name }}" width="200" height="150" >
                        <h3>{{ product.name }}</h3>
                        <p>Price: ${{ product.price }}</p>
                        <p>Category: {{ product.category | capitalize }}</p>
                        <p>{{ product.description or 'No description available' }}</p>
                        {% if session.get('username') %}
                            <a href="{{url_for('main.add_to_cart',product_id = product.id)}}" class="btn btn-primary">Add to Cart</a>
                        {% else %}
                            <p><a href="{{ url_for('auth.login') }}">Log in</a> to add to cart</p>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No products available.</p>
        {% endif %}
         <div class="flash-messages">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}

                    {% for category, message in messages %}
                <p class="flash {{ category }}">{{ message }}</p>
                    {% endfor %}

                {% endif %}
            {% endwith %}
            </div>
    </div>
{% endblock %}